
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">4

<style>
body {
    font-family: "Segoe UI", sans-serif;
    background-color: #f4f4f9;
    padding: 2em;
    max-width: 700px;
    margin: auto;
    color: #333;
}

h1 {
    text-align: center;
    color: #444;
    text-shadow: 1px 1px 0 #fff;
}

textarea {
    width: 100%;
    padding: 1em;
    border-radius: 8px;
    border: 1px solid #ccc;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    resize: vertical;
    font-size: 1em;
}

button {
    padding: 0.6em 1.2em;
    margin-top: 1em;
    border: none;
    border-radius: 6px;
    background: linear-gradient(to bottom, #eee, #ddd);
    box-shadow: 1px 1px 3px rgba(0,0,0,0.2);
    cursor: pointer;
    font-weight: bold;
}

button:hover {
    background: #ccc;
}

#reply {
    margin-top: 1.5em;
    padding: 1em;
    border-radius: 8px;
    background: #fff;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    white-space: pre-wrap;
}
</style>
    
    <title>Ask Larry</title>
</head>
<body>
    <h1>Ask Larry</h1>
    <textarea id="question" rows="4" cols="50" placeholder="Ask your question here..."></textarea><br>
    <button onclick="askLarry()">Ask Larry</button>
    <p><strong>Larry's Reply:</strong></p>
    <div id="reply"></div>

    <button onclick="startListening()">üéôÔ∏è Speak to Larry</button>
    
<script>
async function askLarry() {
    const question = document.getElementById("question").value;
    const replyDiv = document.getElementById("reply");
    replyDiv.innerText = "Larry is thinking...";

    try {
        const response = await fetch("/ask-larry", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ question })
        });

        const data = await response.json();
        replyDiv.innerText = data.reply;
    } catch (error) {
        replyDiv.innerText = "Oops! Something went wrong.";
        console.error("Error talking to Larry:", error);
    }
}

function startListening() {
    const recognition = new webkitSpeechRecognition() || new SpeechRecognition();
    recognition.lang = 'en-IE'; // Irish English
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        document.getElementById("question").value = transcript;
        askLarry();
    };

    recognition.onerror = function(event) {
        alert("Speech recognition error: " + event.error);
    };

    recognition.start();
}
</script>
</body>
</html>
